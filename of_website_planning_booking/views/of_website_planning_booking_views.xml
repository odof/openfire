<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Partner form view (tab 'Localisation') -->
    <record id="view_res_partner_planning_website_form" model="ir.ui.view">
        <field name="name">res.partner.planning.website.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="of_geolocalize.of_partner_geo_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='geo_location_tab']//field[@name='geo_lng']" position="after">
                <field name="of_geo_comment"/>
            </xpath>
        </field>
    </record>

    <!-- OF Parc Installe Form View -->
    <record id="of_website_planning_booking_of_parc_installe_form_view" model="ir.ui.view">
        <field name="name">of.website.planning.booking.of.parc.installe.form.view</field>
        <field name="model">of.parc.installe</field>
        <field name="inherit_id" ref="of_parc_installe.of_parc_installe_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='date_fin_garantie']" position="after">
                <field name="annee_batiment"/>
            </xpath>
        </field>
    </record>

    <!-- Planning Intervention Form View -->
    <record id="of_website_planning_booking_of_planning_intervention_form_view" model="ir.ui.view">
        <field name="name">of.website.planning.booking.of.planning.intervention.form.view</field>
        <field name="model">of.planning.intervention</field>
        <field name="inherit_id" ref="of_planning.of_planning_intervention_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//h1" position="after">
                <field name="website_create" invisible="1"/>
                <h3 style="display: inline; color: white; border: 1px solid black; border-radius: 5px; background: #337ab7; padding-left: 5px; padding-right: 5px;"
                    attrs="{'invisible': [('website_create', '=', False)]}">
                    Web
                </h3>
            </xpath>
        </field>
    </record>

    <!-- Planning Intervention Search View -->
    <record id="of_website_planning_booking_of_planning_intervention_search_view" model="ir.ui.view">
        <field name="name">of.website.planning.booking.of.planning.intervention.search.view</field>
        <field name="model">of.planning.intervention</field>
        <field name="inherit_id" ref="of_planning.of_planning_intervention_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='filter']" position="inside">
                <separator/>
                <filter name="website_create" string="RDV web" domain="[('website_create', '=', True)]"/>
            </xpath>
        </field>
    </record>

    <!-- HR Employee Form View -->
    <record id="of_website_planning_booking_hr_employee_form_view" model="ir.ui.view">
        <field name="name">of.website.planning.booking.hr.employee.form.view</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="of_calendar.view_of_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='horaires']/group[1]/div[1]" position="inside">
                <div class="clearfix"/>
                <br/>
                <separator string="Web"/>
                <field name="of_website_booking_horaire_recap"/>
                <button name="%(of_calendar.action_of_horaire_segment_create_form_view)d" string="Créer un horaire web"
                        context="{
                            'default_employee_id': id,
                            'default_mode': 'create',
                            'default_mode_horaires': of_mode_horaires,
                            'default_type': 'website',
                        }" type="action"/>
                <button name="%(of_calendar.action_of_horaire_segment_edit_form_view)d" string="Modifier un horaire web"
                        context="{
                            'default_employee_id': id,
                            'default_mode': 'edit',
                            'default_mode_horaires': of_mode_horaires,
                            'default_type': 'website',
                        }" type="action"/>
                <button name="%(of_calendar.action_of_horaire_segment_unlink_form_view)d" string="Supprimer un horaire web"
                        context="{
                            'default_employee_id': id,
                            'default_mode': 'unlink',
                            'default_mode_horaires': 'advanced',
                            'default_type': 'website',
                        }" type="action"/>
            </xpath>
        </field>
    </record>

    <!-- Intervention Settings Form View -->
    <record id="of_website_planning_booking_of_intervention_settings_form_view" model="ir.ui.view">
        <field name="name">of.website.planning.booking.of.intervention.settings.form.view</field>
        <field name="model">of.intervention.settings</field>
        <field name="inherit_id" ref="of_planning.view_of_intervention_settings"/>
        <field name="priority">20</field>
        <field name="arch" type="xml">
            <xpath expr="//div[@id='main']/group[last()]" position="after">
                <group name="website_planning_booking" string="Prise de RDV en ligne">
                    <h4 colspan="2"><u>Disponibilités Web</u></h4>
                    <field name="website_booking_allowed_month_ids" class="oe_inline" widget="many2many_tags"/>
                    <field name="website_booking_allowed_day_ids" class="oe_inline" widget="many2many_tags"/>
                    <field name="website_booking_allowed_employee_ids" class="oe_inline" widget="many2many_tags"/>
                    <field name="website_booking_open_days_number" class="oe_inline"/>
                    <field name="website_booking_allow_empty_days" class="oe_inline"/>
                    <field name="website_booking_slot_size" class="oe_inline"/>
                    <h4 colspan="2"><u>Divers</u></h4>
                    <label for="group_website_booking_allow_park_creation"/>
                    <div name="group_website_booking_allow_park_creation">
                        <field name="group_website_booking_allow_park_creation" class="oe_inline"/>
                        <span>Autorise la création d'un parc installé extérieur</span>
                    </div>
                    <label for="group_website_booking_allow_park_brand_creation"
                           attrs="{'invisible': [('group_website_booking_allow_park_creation', '=', False)]}"/>
                    <div name="group_website_booking_allow_park_brand_creation"
                         attrs="{'invisible': [('group_website_booking_allow_park_creation', '=', False)]}">
                        <field name="group_website_booking_allow_park_brand_creation" class="oe_inline"/>
                        <span>Autorise la création d'un parc installé sur des marques extérieures</span>
                    </div>
                    <field name="website_booking_default_product_brand_id" class="oe_inline"
                           attrs="{'invisible': [('group_website_booking_allow_park_brand_creation', '=', False)],
                                   'required': [('group_website_booking_allow_park_brand_creation', '=', True)]}"/>
                    <field name="website_id" invisible="1"/>
                    <field name="website_booking_terms_file" filename="website_booking_terms_filename" class="oe_inline"/>
                    <field name="website_booking_terms_filename" invisible="1"/>
                </group>
            </xpath>
        </field>
    </record>

    <!-- OF Product Brand Form View -->
    <record id="of_website_planning_booking_of_product_brand_form_view" model="ir.ui.view">
        <field name="name">of.website.planning.booking.of.product.brand.form.view</field>
        <field name="model">of.product.brand</field>
        <field name="inherit_id" ref="of_product_brand.of_product_brand_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='toggle_active']" position="after">
                <button class="oe_stat_button" name="website_publish_button" type="object" icon="fa-globe"
                        groups="of_website_planning_booking.group_website_booking_allow_park_creation">
                    <field name="website_published" widget="website_button"/>
                </button>
            </xpath>
        </field>
    </record>

    <!-- Product Category Form View -->
    <record id="of_website_planning_booking_product_category_form_view" model="ir.ui.view">
        <field name="name">of.website.planning.booking.product.category.form.view</field>
        <field name="model">product.category</field>
        <field name="inherit_id" ref="product.product_category_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='button_box']" position="inside">
                <button class="oe_stat_button" name="website_publish_button" type="object" icon="fa-globe"
                        groups="of_website_planning_booking.group_website_booking_allow_park_creation">
                    <field name="website_published" widget="website_button"/>
                </button>
            </xpath>
        </field>
    </record>

</odoo>
