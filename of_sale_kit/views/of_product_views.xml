<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="of_product_template_form_view" model="ir.ui.view">
        <field name="name">of.kit.product.template.common.form</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='options']" position="inside">
                <div>
                    <field name="is_kit"/>
                    <label for="is_kit"/>
                </div>
            </xpath>
            <xpath expr="//group[@name='group_general']" position="inside">
            	<separator string="Kit info" name="Kit info" attrs="{'invisible': [('is_kit','=',False)]}"/>
            	<div attrs="{'invisible': [('is_kit','=',False)]}"/>
            	<field name="current_bom_id" attrs="{'invisible': [('is_kit','=',False)]}"/>
            	<field name="pricing" attrs="{'invisible': [('is_kit','=',False)]}"/>
            	<field name="price_compo" attrs="{'invisible': [('is_kit','=',False)]}"/>
            	<field name="price_used" attrs="{'invisible': [('is_kit','=',False)]}"/>
            </xpath>
            <xpath expr="//page[@name='general_information']//field[@name='type']" position="attributes">
            	<attribute name="attrs">{'readonly': [('is_kit','=',True)]}</attribute>
            </xpath>
        </field>
    </record>

    <record id="of_product_template_form_view_bom_button" model="ir.ui.view">
        <field name="name">of.kit.product.template.procurement</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="mrp.product_template_form_view_bom_button"/>
        <field name="groups_id" eval="[(4, ref('mrp.group_mrp_user'))]"/>
        <field name="arch" type="xml">
        	<xpath expr="//button[@icon='fa-flask']" position="attributes">
            	<attribute name="attrs"></attribute>
            </xpath>
        </field>
    </record>

    <record id="of_product_product_form_view_bom_button" model="ir.ui.view">
        <field name="name">of.kit.product.product.procurement</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="mrp.product_product_form_view_bom_button"/>
        <field name="groups_id" eval="[(4, ref('mrp.group_mrp_user'))]"/>
        <field name="arch" type="xml">
        	<xpath expr="//button[@name='action_view_bom']" position="attributes">
            	<attribute name="attrs"></attribute>
            </xpath>
        </field>
    </record>

	<!--#############################################################################
        ##                      PROCUREMENT VIEWS
        #############################################################################
     -->
	<record id="of_procurement_form_view" model="ir.ui.view">
        <field name="name">procurement.order.form</field>
        <field name="model">procurement.order</field>
        <field name="inherit_id" ref="procurement.procurement_form_view"/>
        <field name="arch" type="xml">
        	<xpath expr="//field[@name='origin']" position="after">
            	<field name="sale_comp_id" attrs="{'invisible': [('sale_comp_id','=',False)]}"/>
            </xpath>
        </field>
    </record>

</odoo>