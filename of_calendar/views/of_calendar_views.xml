<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
<!--##############################################################################-->
<!--######################### ______ Utilisateurs ______ #########################-->
<!--##############################################################################-->
    <record id="of_view_users_form" model="ir.ui.view">
        <field name="name">of.res.users.form</field>
        <field name="model">res.users</field>
        <field name="inherit_id" ref="base.view_users_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form//notebook//group[@name='messaging']" position="after">
                <group string="Divers" name="divers">
                    <field name="of_color_ft" widget="color"/>
                    <field name="of_color_bg" widget="color"/>
                </group>
            </xpath>
        </field>
    </record>

    <record id="of_view_users_tree" model="ir.ui.view">
        <field name="name">of.res.users.tree</field>
        <field name="model">res.users</field>
        <field name="inherit_id" ref="base.view_users_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree//field[@name='login']" position="after">
                <field name="of_color_bg" string="couleur" widget="color"/>
            </xpath>
        </field>
    </record>

<!--##############################################################################-->
<!--######################### ______ Employés ______ #############################-->
<!--##############################################################################-->
    <record id="of_view_employee_form" model="ir.ui.view">
        <field name="name">of.hr.employee.form</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='public']/group" position="after">
                <group name="page1_group2" col="4" colspan="4">
                    <group name="horaires" string="Horaires" col="3" colspan="2">
                        <field name="hor_md" string="Matin" widget="float_time" colspan="2"/>
                        <field name="hor_mf" widget="float_time" colspan="1" nolabel="1"/>
                        <field name="hor_ad" string="Après-midi" widget="float_time" colspan="2"/>
                        <field name="hor_af" widget="float_time" colspan="1" nolabel="1"/>
                        <field name="jour_ids" widget="many2many_tags" colspan="3"/>
                        <field name="tz" widget="timezone_mismatch" options="{'tz_offset_field': 'tz_offset'}" colspan="3"/>
                        <field name="tz_offset" invisible="1" colspan="3"/>
                    </group>
                    <group name="deplacements" string="Déplacements" colspan="2">
                        <field name="address_depart_id"/>
                        <field name="address_retour_id"/>
                    </group>
                </group>
            </xpath>
        </field>
    </record>

<!--##############################################################################-->
<!--########################## ______ Calendrier ______ ##########################-->
<!--##############################################################################-->

    <record id="of_view_calendar_event_form" model="ir.ui.view">
        <field name="name">of.calendar.event.form</field>
        <field name="model">calendar.event</field>
        <field name="inherit_id" ref="calendar.view_calendar_event_form"/>
        <field name="arch" type="xml">
            <xpath expr="//h1" position="attributes">
                <attribute name="class">oe_edit_only</attribute>
            </xpath>
            <xpath expr="//field[@name='categ_ids']" position="replace"></xpath>
            <xpath expr="//field[@name='alarm_ids']" position="replace"></xpath>
            <xpath expr="//field[@name='location']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='allday']" position="after">
                <field name="categ_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
                <field name="alarm_ids" widget="many2many_tags"/>
            </xpath>
            <xpath expr="//field[@name='location']" position="before">
                <!--field name="user_company_ids" invisible="1"/
                <field name="lieu_address_state_id" class="o_address_state" options='{"no_open": True}' context="{'country_id': country_id, 'zip': zip}"/>
                -->
                <field name="lieu" widget="selection"/>
                <field name="lieu_company_id" widget="selection" attrs="{'invisible': [('lieu', '!=', 'onsite')],'required': [('lieu', '=', 'onsite')]}"/>
                <field name="lieu_rdv_id" options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('lieu', '!=', 'offsite')],'required': [('lieu', '=', 'offsite')]}"/>
                <label for="lieu_address_street" string="Adresse: " colspan="2" style="margin-bottom: 4px" attrs="{'invisible': [('lieu', '=', 'phone')]}"/>
                <div class="o_address_format oe_grey" colspan="2" attrs="{'invisible': [('lieu', '=', 'phone')],'readonly': [('lieu', 'in', ['offsite','onsite','phone'])]}"><i>
                    <field name="lieu_address_street" placeholder="Street..." class="o_address_street" attrs="{'readonly': [('lieu', 'in', ['offsite','onsite','phone'])]}"/>
                    <field name="lieu_address_street2" placeholder="Street 2..." class="o_address_street" attrs="{'readonly': [('lieu', 'in', ['offsite','onsite','phone'])]}"/>
                    <field name="lieu_address_city" placeholder="City" class="o_address_city" attrs="{'readonly': [('lieu', 'in', ['offsite','onsite','phone'])]}"/>
                    <field name="lieu_address_zip" placeholder="ZIP" class="o_address_zip" attrs="{'readonly': [('lieu', 'in', ['offsite','onsite','phone'])]}"/>
                    <field name="lieu_address_country_id" placeholder="Country" class="o_address_country" options='{"no_open": True, "no_create": True}' attrs="{'readonly': [('lieu', 'in', ['offsite','onsite','phone'])]}"/></i>
                </div>
            </xpath>
            <!-- rendre l'onglet 'divers' visible tout le temps -->
            <xpath expr="//page[4]" position="attributes">
                <attribute name="groups"></attribute>
                <attribute name="name">misc</attribute>
            </xpath>
        </field>
    </record>

    <record id="of_view_calendar_event_calendar" model="ir.ui.view">
        <field name="name">of.calendar.event.calendar</field>
        <field name="model">calendar.event</field>
        <field name="inherit_id" ref="calendar.view_calendar_event_calendar"/>
        <field name="priority" eval="2"/>
        <field name="arch" type="xml">
            <xpath expr="//calendar" position="attributes">
                <attribute name="color_ft_field">of_color_ft</attribute>
                <attribute name="color_bg_field">of_color_bg</attribute>
                <attribute name="custom_colors">1</attribute>
                <attribute name="quick_add">0</attribute>
                <attribute name="event_open_popup">%(of_view_calendar_event_form)s</attribute>
                <!--attribute name="use_contacts">0</attribute>
                <attribute name="attendee_model">res.partner</attribute-->
            </xpath>
            <xpath expr="//calendar" position="inside">
                <field name="on_phone" icon="phone" position="right" invisible="1"/>
            </xpath>
            <!--xpath expr="//calendar" position="inside">
                <!- - These fields would be necessary if use_contacts="0". See function event_data_transform in .js file - ->
                <field name="of_color_ft" invisible="1"/>
                <field name="of_color_bg" invisible="1"/>
            </xpath-->
        </field>
    </record>

    <record id="view_of_calendar_event_type_tree" model="ir.ui.view">
        <field name="name">of.calendar.event.type</field>
        <field name="model">calendar.event.type</field>
        <field name="inherit_id" ref="calendar.view_calendar_event_type_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="inside">
                <field name="active"/>
            </xpath>
        </field>
    </record>

    <record id="view_of_calendar_event_type_filter" model="ir.ui.view">
        <field name="name">of.calendar.event.type.select</field>
        <field name="model">calendar.event.type</field>
        <field name="arch" type="xml">
            <search string="Search Partner">
                <filter string="Actif" name="active" domain="[('active','=',True)]"/>
                <filter string="Inactif" name="inactive" domain="[('active','=',False)]"/>
            </search>
        </field>
    </record>

<!--##############################################################################-->
<!--########################## ______ Partenaires ______ ##########################-->
<!--##############################################################################-->
    <record id="of_calendar_view_partner_form" model="ir.ui.view">
        <field name="name">of.calendar.res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form//sheet//field[@name='category_id']" position="after">
                <field name="of_color_ft" widget="color" attrs="{'invisible': [('user_ids', '=', [])]}"/>
                <field name="of_color_bg" widget="color" attrs="{'invisible': [('user_ids', '=', [])]}"/>
            </xpath>
        </field>
    </record>
</data>
</odoo>