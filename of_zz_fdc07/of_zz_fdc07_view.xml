<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!-- Ajouter champ service dans vue partenaires -->
        <record id="of_res_partner_form" model="ir.ui.view">
            <field name="name">of.res.partner.form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <field name="phone" position="before">
                    <field name="of_service" attrs="{'invisible': [('company_type','!=', 'company')]}"/>
                </field> 
                <field name="of_categ_id" position="replace">
                    <field name="of_categ_id" attrs="{'invisible': [('company_type','!=', 'company')]}"/>
                </field>
                <page name="sales_purchases" position="attributes">
                    <attribute name="string">Informations complémentaires</attribute>
                </page>
                <page name="accounting" position="attributes">
                    <attribute name="invisible">True</attribute>
                </page>
                <page name="accounting_disabled" position="attributes">
                    <attribute name="invisible">True</attribute>
                </page>
                <page name="historique" position="inside">
                    <group name="histo_events" string="Planning">
                        <field name="meeting_ids" colspan="4" nolabel="1" readonly="1"/>
                    </group>
                </page>
            </field>
        </record>


<!-- *************************************************** -->        
<!-- ********************** MENUS ********************** -->
<!-- *************************************************** -->   
                
        <!-- Menu FDC 07 dans barre menu -->
        <menuitem id="menu_of_fdc07" name="FDC 07" sequence="0"/>
        
        <menuitem id="of_sous-menu_fdc07" name="FDC 07" parent="menu_of_fdc07" sequence="5"/>
        <menuitem id="of_menu_projet_fdc07" name="Projets" parent="menu_of_fdc07" sequence="50"/>
        <menuitem id="of_menu_conges_fdc07" name="Congés" parent="menu_of_fdc07" sequence="60"/>
        <menuitem id="of_menu_config_fdc07" name="Configuration" parent="menu_of_fdc07" sequence="100"/>


        <!-- Menu partenaires -->
        <record id="of_action_partner_form" model="ir.actions.act_window">
            <field name="name">Contacts</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="context">{}</field>
        </record>
        
        <menuitem id="of_menu_partner_form" parent="of_sous-menu_fdc07" action="of_action_partner_form" sequence="15"/>
        
        <!-- Menu projets -->
        <record id="of_open_view_project_all_config" model="ir.actions.act_window">
            <field name="name">Projets</field>
            <field name="res_model">project.project</field>
            <field name="view_type">form</field>
            <field name="domain">[]</field>
            <field name="view_mode">list,form</field>
            <field name="search_view_id" ref="project.view_project_project_filter"/>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Create a new project.
                </p><p>
                    Organize your activities (plan tasks, track issues, invoice timesheets) for internal, personal or customer projects.
                </p>
            </field>
        </record>
        
        <menuitem action="of_open_view_project_all_config" id="of_menu_projects_config" name="Projets" parent="of_menu_projet_fdc07" sequence="15"/>


        <!-- Menu calendriers -->
        <record id="of_action_calendar_event" model="ir.actions.act_window">
            <field name="name">Planning</field>
            <field name="res_model">calendar.event</field>
            <field name="view_mode">calendar,tree,form</field>
            <field name="view_id" ref="calendar.view_calendar_event_calendar"/>
            <field name="search_view_id" ref="calendar.view_calendar_event_search"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to schedule a new meeting.
              </p><p>
                The calendar is shared between employees and fully integrated with
                other applications such as the employee holidays or the business
                opportunities.
              </p>
            </field>
        </record>
        
        <menuitem action="of_action_calendar_event" id="menu_of_calendar_action_form" parent="of_sous-menu_fdc07" sequence="20"/>        

        <!-- Menu notes -->
        <record model="ir.actions.act_window" id="of_action_note_note">
          <field name="name">Notes</field>
          <field name="res_model">note.note</field>
          <field name="view_type">form</field>
          <field name="view_mode">kanban,tree,form</field>
          <field name="search_view_id" ref="note.view_note_note_filter"/>
          <field name="context">{}</field>
          <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to add a personal note.
              </p><p>
                Use notes to organize personal tasks or notes. All
                notes are private; no one else will be able to see them. However
                you can share some notes with other people by inviting followers
                on the note. (Useful for meeting minutes, especially if
                you activate the pad feature for collaborative writings).
              </p><p>
                You can customize how you process your notes/tasks by adding,
                removing or modifying columns.
              </p>
            </field>
        </record>

        <menuitem name="Notes" id="of_menu_note_notes" action="of_action_note_note" parent="of_sous-menu_fdc07" sequence="25" web_icon="note,static/description/icon.png"/>
  
        
        <!-- Menu feuilles de temps -->
        <record id="of_act_hr_timesheet_sheet_my_timesheets" model="ir.actions.act_window">
            <field name="name">Feuilles de temps</field>
            <field name="res_model">hr_timesheet_sheet.sheet</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('employee_id.user_id', '=', uid)]</field>
            <field name="search_view_id" ref="hr_timesheet_sheet.view_hr_timesheet_sheet_filter"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                new timesheet.
              </p><p>
                You must record timesheets every day and confirm at the end
                of the week. Once the timesheet is confirmed, it should be
                validated by a manager.
              </p><p>
                Timesheets can also be invoiced to customers, depending on the
                configuration of each project's related contract.
              </p>
            </field>
        </record>

        <menuitem action="of_act_hr_timesheet_sheet_my_timesheets" id="of_menu_act_hr_timesheet_sheet_my_timesheets" parent="of_menu_projet_fdc07" sequence="25"/>


        <!-- Menu tâches -->
        <record id="of_action_view_task" model="ir.actions.act_window">
            <field name="name">Tâches</field>
            <field name="res_model">project.task</field>
            <field name="view_mode">kanban,tree,form,calendar,pivot,graph</field>
            <field name="context">{}</field>
            <field name="search_view_id" ref="project.view_task_search_form"/>
            <field name="help" type="html">
                <p>
                    Odoo's project management allows you to manage the pipeline of your tasks efficiently. You can track progress, discuss on tasks, attach documents, etc.
                </p>
            </field>
        </record>
        
        <menuitem action="of_action_view_task" id="of_menu_action_view_task" parent="of_menu_projet_fdc07" sequence="20"/>

        <!--  Menu résumé des congés -->
        <record model="ir.actions.act_window" id="of_open_company_allocation">
            <field name="name">Résumé des congés</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="hr_holidays.view_holiday_simple"/>
            <field name="context">{
                'search_default_group_type': 1,
                'search_default_year': 1 ,
                'search_default_my_leaves': 1,
                'needaction_menu_ref':
                [
                    'hr_holidays.menu_open_ask_holidays_new',
                    'hr_holidays.menu_open_allocation_holidays',
                    'hr_holidays.menu_request_approve_allocation',
                    'hr_holidays.menu_open_employee_leave',
                ]
            }</field>
            <field name="domain">[('holiday_type','=','employee')]</field>
            <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
        </record>

        <menuitem name="Résumé des congés" parent="of_menu_conges_fdc07" id="of_menu_open_company_allocation" action="of_open_company_allocation" sequence="10"/>

        <!-- Menu Demande de congés -->
        <record model="ir.actions.act_window" id="of_open_ask_holidays">
            <field name="name">Demande de congés</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="hr_holidays.edit_holiday_new"/>
            <field name="context">{
                'default_type': 'remove',
                'search_default_my_leaves':1,
                'needaction_menu_ref':
                [
                    'hr_holidays.menu_open_company_allocation',
                ]
            }</field>
            <field name="domain">[('type','=','remove')]</field>
            <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new leave request.
              </p><p>
                Once you have recorded your leave request, it will be sent
                to a manager for validation. Be sure to set the right leave
                type (recuperation, legal holidays, sickness) and the exact
                number of open days related to your leave.
              </p>
            </field>
        </record>

        <menuitem parent="of_menu_conges_fdc07" id="of_menu_open_ask_holidays_new" action="of_open_ask_holidays" sequence="20"/>

        <!-- Menu configuration catégories de partenaires -->
        <record id="of_partner_categ_action_form" model="ir.actions.act_window">
            <field name="name">Catégories de contacts</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">of.partner.categ</field>
            <field name="view_type">form</field>
        </record>
        
        <menuitem action="of_partner_categ_action_form"
            id="menu_of_partner_categ_action_form"
            parent="of_menu_config_fdc07" sequence="10"/>

        <!--  Menu employés -->
        <record id="of_open_view_employee_list_my" model="ir.actions.act_window">
            <field name="name">Employés</field>
            <field name="res_model">hr.employee</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="hr.view_employee_filter"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to add a new employee.
              </p><p>
                With just a quick glance on the Odoo employee screen, you
                can easily find all the information you need for each person;
                contact data, job position, availability, etc.
              </p>
            </field>
        </record>

        <menuitem action="of_open_view_employee_list_my" id="of_menu_open_view_employee_list_my" sequence="3" parent="of_menu_config_fdc07"/>
       

    </data>
</openerp>